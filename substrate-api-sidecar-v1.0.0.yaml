openapi: 3.0.0
info:
  description: |
    RESTfull HTTP microservice for communicating with a substrate based node.
  version: "1.0.0-oas3"
  title: Substrate API Sidecar
  contact:
    email: parity@parity.io
    name: Parity Technologies
  license:
    name: GNU General Public License v3.0
    url: 'https://github.com/paritytech/substrate-api-sidecar/blob/master/LICENSE'
tags:
  - name: accounts
  - name: blocks
  - name: node
    description: node connected to sidecar
  - name: transactions
  - name: pallets
    description: pallets employed in the runtime
paths:
  '/accounts/{accountId}/balance-info':
    get:
      tags:
        - accounts
      summary: Get balance summary for an address.
      description: Returns a curated grouping of values related to an accounts balance.
      operationId: getBalanceSummaryByAccountId
      parameters:
        - in: path
          name: accountId
          description: the account identifier, as the ss58 encoded public address.
          required: true
          schema:
            type: string
        - in: query
          name: at
          description: Historic block to make query at.
          required: false
          schema:
            type: string
            format: unsignedInteger or $hex
            description: block identifier, as the block height or block hash.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountBalanceSummary'
        '400':
          description: invalid blockId supplied for at query param
        '404':
          description: Account not found
  '/accounts/{accountId}/staking-info':
    get:
      tags:
      - accounts
      summary: Get a staking summary for a stash address.
      description: >-
        Returns a a curated grouping of values related to an staking accounts 
        staking activity.
      operationId: getStakingSummaryByAccountId
      parameters: 
      - in: path
        name: accountId
        description: the account identifier, as the ss58 encoded public address.
        required: true
        schema:
          type: string
      - in: query
        name: at
        description: Historic block to make query at.
        required: false
        schema:
          type: string
          format: unsignedInteger or $hex
          description:  block identifier, as the block height or block hash.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountStakingSummary'
        '400':
          description: invalid blockId supplied for at query param
        '404':
          description: Account not found
  '/accounts/{accountId}/vesting-info':
    get:
      tags:
      - accounts
      summary: Get vesting information for an address.
      description: Returns the vesting schedule for an account.
      operationId: getVestingSummaryByAccountId
      parameters: 
      - in: path
        name: accountId
        description: the account identifier, as the ss58 encoded public address.
        required: true
        schema:
          type: string
      - in: query
        name: at
        description: Historic block to make query at.
        required: false
        schema:
          type: string
          format: unsignedInteger or $hex
          description:  block identifier, as the block height or block hash.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountVestingSummary'
        '400':
          description: invalid blockId supplied for at query param
        '404':
          description: account not found
  '/blocks/{blockId}':
    get:
      tags:
        - blocks
      summary: Find a block by ID
      description: >-
        Returns a single block. BlockId can either be a block hash or a block
        height.
      operationId: getBlockById
      parameters:
        - in: path
          name: blockId
          description:  block identifier, as the block height or block hash.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Block'
        '400':
          description: Invalid block ID supplied
        '404':
          description: Block not found
  /blocks/head:
    get:
      tags:
        - blocks
      summary: Get the most recently finalized block
      description: Returns the most recently finalized block
      operationId: getHeadBlock
      parameters:
      - in: query
        name: finalized
        description: >-
          Boolean representing wether or not to get the finalized head. If it
          is not set the value defaults to true. When set to false it will
          attempt to get the newest known block, which may not be finalized.
        required: false
        schema:
          type: boolean
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Block'
  /node/health:
    get:
      tags:
      - node
      summary: TODO fill me out
      description: getNodeHealth
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object #TODO make a component for me
  /node/networking:
    get:
      tags:
      - node
      summary: TODO fill me out
      description: TODO fill me out
      operationId: getNodeNetworking
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object #TODO make a component for me
  /node/tx-pool:
    get:
      tags:
        - node
      summary: Get the mempool of the client.
      description: >-
        Returns the extrinsics that the client knows of that have not been
        included in a block.
      operationId: getNodeTxPool
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Extrinsic'
  /node/version:
    get:
      tags:
      - node
      summary: TODO fill me out
      description: TODO fill me out
      operationId: getNodeVersion
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object #TODO make a component for me
  /transactions:
    post:
      tags:
        - transactions
      summary: Submit a transaction to be included in the blockchain
      description: Accepts a valid signed extrinsic
      operationId: submitTx
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TxSuccess'
        '400':
          description: invalid transaction
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TxFailure'
      requestBody:
        $ref: '#/components/requestBodies/Tx'
  /transactions/dry-run:
    post:
      tags:
        - transactions
      summary: dry run an extrinsic
      description: >-
        Use the dryrun call to practice submission of a transaction. A fee will
        be charged, but the extrinsic will not produce other state change.
      operationId: dryrunTx
      responses:
        '200':
          description: successful operation
        '400':
          description: invalid transaction
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TxFailure'
      requestBody:
        $ref: '#/components/requestBodies/Tx'
  /transactions/fee-estimate:
    post:
      tags:
        - transactions
      summary: Receive a fee estimate for a transaction.
      description: Send a serialized transaction and receive back a naive fee estimate.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TxFeeEstimate'
        '400':
          description: invalid transaction
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TxFailure'
  /transactions/material:
    get:
      tags:
        - transactions
      summary: Get the baseline material to construct a transaction.
      description: >-
        Returns the material that is universal to constructing any signed
        extrinsic offline.
      operationId: getTxMaterial
      parameters:
        - name: at
          in: query
          description: Historic block to make query at.
          required: false
          schema:
            type: string
            format: unsignedInteger or $hex
            description: block identifier
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TxMaterial'
        '400':
          description: invalid blockId supplied for at query param
  /pallets/staking/progress:
    get:
      tags:
        - pallets
        - staking
      summary: Get a progress report on the chains staking system.
      description: >-
        Returns information on the progress of key components of the staking
        system and estimates of future progress points.
      operationId: getStakingProgress
      parameters:
        - name: at
          in: query
          description: Historic block to make query at.
          required: false
          schema:
            type: string
            format: unsignedInteger or $hex
            description: block identifier, as the block height or block hash.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StakingProgress'
        '400':
          description: invalid blockId supplied for at query param
  /pallets:
    get:
      tags:
      - pallets
      summary: Get a list of pallets used in the runtime.
      description: >-
        Returns an array of palletIds for pallets that are used in the runtime.
      parameters:
      - name: at
        in: query
        description: Historic block to make query at.
        required: false
        schema:
          type: string
          format: unsignedInteger or $hex
          description: block identifier, as the block height or block hash.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                description: Array of palletIds.
        '400':
          description: invalid blockId supplied for at query param
  '/pallets/{palletId}/storage':
    get:
      tags:
      - pallets
      summary: Get a list of the queryable storage items for a pallet.
      description: >-
        Returns a list of storageItemIds for queryable storage
        items of the specified palletId.
      parameters:
      - name: palletId
        in: path
        description: Id of the pallet to query the storage of.
        required: true
        schema:
          type: string
      - name: at
        in: query
        description: Historic block to make query at.
        required: false
        schema:
          type: string
          format: unsignedInteger or $hex
          description: block identifier, as the block height or block hash.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                description: Array of storageItemIds.
        '400':
          description: invalid blockId supplied for at query param
  '/pallets/{palletId}/storage/{storageItemId}':
    get:
      tags:
      - pallets
      summary: Get the value of a storage item.
      description: >-
        Returns value stored under the storageItemId. If it is a map,
        query param key1 is required. If the storage item is double map
        query params key1 and key2 are required.
      parameters:
      - name: palletId
        in: path
        description: Id of the pallet to query the storage of.
        required: true
        schema:
          type: string
      - name: storageItemId
        in: path
        description: Id of the storage item to query for.
        required: true
        schema:
          type: string
      - name: key1
        in: query
        description: >-
          Key for a map, or first key for a double map. Required for
          querying a map.
        required: false
        schema:
          type: string
      - name: key2
        in: query
        description: >-
          Second key for a double map. Required for querying a double map.
        required: false
        schema:
          type: string
      - name: at
        in: query
        description: Historic block to make query at.
        required: false
        schema:
          type: string
          format: unsignedInteger or $hex
          description: block identifier, as the block height or block hash.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                description: >-
                  Successful query response type is dependent on the storage item value.
        '400':
          description: invalid blockId supplied for at query param
  '/pallets/{palletId}/constants':
    get:
      tags:
      - pallets
      summary: Get a list of the queryable constants for a pallet.
      description: >-
        Returns a list of constantIds for queryable storage items of
        the specified palletId.
      parameters:
      - name: palletId
        in: path
        description: Id of the pallet to query the constant of.
        required: true
        schema:
          type: string
      - name: at
        in: query
        description: Historic block to make query at.
        required: false
        schema:
          type: string
          format: unsignedInteger or $hex
          description: block identifier, as the block height or block hash.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                description: >-
                  Successful query response type is dependent on the constants value.
        '400':
          description: invalid blockId supplied for at query param
  '/pallets/{palletId}/constants/{constantId}':
    get:
      tags:
      - pallets
      summary: Get the value of a constant.
      description: Returns the value stored under the constantId.
      parameters:
      - name: palletId
        in: path
        description: Id of the pallet to query the constant of.
        required: true
        schema:
          type: string
      - name: constantId
        in: path
        description: Id of the constant to query for.
        required: true
        schema:
          type: string
      - name: at
        in: query
        description: Historic block to make query at.
        required: false
        schema:
          type: string
          format: unsignedInteger or $hex
          description: block identifier, as the block height or block hash.
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                description: >-
                  Successful query response type is dependent on the constants value.
        '400':
          description: invalid blockId supplied for at query param
components:
  requestBodies:
    Tx:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Tx'
      required: true
  schemas:
    BalanceLock:
      type: object
      properties:
        id:
          type: string
          description: >-
            An identifier for this lock. Only one lock may be in existence for
            each identifier.
        amount:
          type: string
          format: unsignedInteger
          description: >-
            The amount below which the free balance may not drop with this lock
            in effect.
        reasons:
          type: string
          enum:
            - Fee = 0
            - Misc = 1
            - All = 2
          description: Reasons for withdrawing balance.
    AccountBalanceSummary:
      type: object
      properties:
        at:
          $ref: '#/components/schemas/BlockIdentifiers'
        nonce:
          type: string
          format: unsignedInteger
          description: Account nonce.
        free:
          type: string
          format: unsignedInteger
          description: >-
            Free balance of the account. Not equivalent to _spendable_ balance.
            This is the only balance that matters in terms of most operations on
            tokens.
        reserved:
          type: string
          format: unsignedInteger
          description: Reserved balance of the account.
        miscFrozen:
          type: string
          format: unsignedInteger
          description: >-
            The amount that `free` may not drop below when withdrawing for
            anything except transaction fee payment.
        feeFrozen:
          type: string
          format: unsignedInteger
          description: >-
            The amount that `free` may not drop below when withdrawing
            specifically for transaction fee payment.
        locks:
          type: array
          items:
            $ref: '#/components/schemas/BalanceLock'
          description: >-
            Array of locks on a balance. There can be many of these on an
            account and they "overlap", so the same balance is frozen by
            multiple locks
    StakingLedger:
      type: object
      properties:
        stash:
          type: string
          format: ss58
          description: >-
            The stash account whose balance is actually locked and at stake.
        total:
          type: string
          format: unsignedInteger
          description: >-
            The total amount of the stash's balance that we are currently 
            accounting for.  Simply `active + unlocking`.
        active:
          type: string
          format: unsignedInteger
          description: >-
            The total amount of the stash's balance that will be at stake in 
            any forthcoming eras.
        unlocking:
          type: string
          format: unsignedInteger
          description: >-
            Any balance that is becoming free, which may eventually be transferred 
            out of the stash (assuming it doesn't get slashed first). Represented 
            as an array of objects, each with an `era` at which `value` will be unlocked.
        claimedRewards:
          type: array
          items:
            type: string
            format: unsignedInteger
          description: >-
            Array of eras for which the stakers behind a validator have claimed
            rewards. Only updated for _validators._
      description: >-
        The staking ledger.
    AccountStakingSummary:
      type: object
      properties:
        at:
          $ref: '#/components/schemas/BlockIdentifiers'
        rewardDestination:
          type: string
          format: ss58
          enum:
          - Staked
          - Stash
          - Controller
          description: >-
            The account to which rewards will be paid. Can be 'Staked' 
            (Stash account, adding to the amount at stake), 'Stash' 
            (Stash address, not adding to the amount at stake), or 
            'Controller' (Controller address).
        controller:
          type: string
          format: ss58
          description: Controller address for the given Stash.
        numSlashingSpans:
          type: string
          format: unsignedInteger
          description: >-
            Number of slashing spans on Stash account; `null` if provided 
            address is not a Controller.
        stakingLedger:
          $ref: '#/components/schemas/StakingLedger'
    VestingSchedule:
      type: object
      properties:
        locked:
          type: string
          format: unsignedInteger
          description: Number of tokens locked at start.
        perBlock:
          type: string
          format: unsignedInteger
          description: >-
            Number of tokens that gets unlocked every block after `startingBlock`.
        startingBlock:
          type: string
          format: unsignedInteger
          description: Starting block for unlocking(vesting).
      description: Vesting schedule for an account.
    AccountVestingSummary:
      type: object
      properties:
        at:
          $ref: '#/components/schemas/BlockIdentifiers'
        vesting:
          $ref: '#/components/schemas/VestingSchedule'
    BlockIdentifiers:
      type: object
      properties:
        hash:
          type: string
          format: hexBlockHash
          description: The block's hash.
        height:
          type: string
          format: unsignedInteger
          description: Block height.
    DigestItem:
      type: object
      properties:
        type:
          type: string
        index:
          type: string
          format: unsignedInteger
        value:
          type: array
          items:
            type: string
    SanitizedEvent:
      type: object
      properties:
        method:
          type: string
        data:
          type: array
          items:
            type: string
    Signature:
      type: object
      description: 'Object with `signature` and `signer`, or `null` if unsigned.'
      properties:
        signature:
          type: string
          format: hex
        signer:
          type: string
          format: ss58
    RuntimeDispatchInfo:
      type: object
      description: RuntimeDispatchInfo for the transaction. Includes the `partialFee`.
      properties:
        weight:
          type: string
          description: Extrinsic weight.
        class:
          type: string
          description: Extrinsic class.
          enum:
            - Normal
            - Operational
            - Mandatory
        partialFee:
          type: string
          format: unsignedInteger
          description: 'Transaction fee, not including any tip.'
    Extrinsic:
      type: object
      properties:
        method:
          type: string
          description: 'Extrinsic method, `{module}.{function}`.'
        signature:
          $ref: '#/components/schemas/Signature'
        nonce:
          type: string
          format: unsignedInteger
          description: 'Account nonce, if applicable.'
        args:
          type: object
          description: Object of arguments keyed by parameter name.
        tip:
          type: string
          format: unsignedInteger
          description: Any tip added to the transaction.
        hash:
          type: string
          format: hex
          description: The transaction's hash.
        info:
          $ref: '#/components/schemas/RuntimeDispatchInfo'
        events:
          type: array
          items:
            $ref: '#/components/schemas/SanitizedEvent'
          description: >-
            An array of `SanitizedEvent`s that occurred during extrinsic
            execution.
        success:
          type: boolean
          description: Whether or not the extrinsic succeeded.
        paysFee:
          type: boolean
          description: >-
            Whether the extrinsic requires a fee. Careful! This field relates to
            whether or not the extrinsic requires a fee if called as a
            transaction. Block authors could insert  the extrinsic as an
            inherent in the block and not pay a fee. Always check that `paysFee`
            is `true` and that the extrinsic is signed when reconciling old
            blocks.
    Block:
      type: object
      properties:
        identifiers:
          $ref: '#/components/schemas/BlockIdentifiers'
        parentHash:
          type: string
          format: hex
          description: The hash of the parent block.
        stateRoot:
          type: string
          format: hex
          description: The state root after executing this block.
        extrinsicRoot:
          type: string
          format: hex
          description: The Merkle root of the extrinsics.
        authorId:
          type: string
          format: ss58
          description: >-
            The account ID of the block author (may be undefined for some
            chains).
        logs:
          type: array
          items:
            $ref: '#/components/schemas/DigestItem'
        onInitialize:
          type: object
          properties:
            events:
              type: array
              items:
                $ref: '#/components/schemas/SanitizedEvent'
          description: >-
            Object with an array of `SanitizedEvent`s that occurred during block
            initialization with the `method` and `data` for each.
        extrinsics:
          type: array
          items:
            $ref: '#/components/schemas/Extrinsic'
          description: Array of extrinsics (inherents and transactions) within the block.
        onFinalize:
          type: object
          properties:
            events:
              type: array
              items:
                $ref: '#/components/schemas/SanitizedEvent'
          description: >-
            Object with an array of `SanitizedEvent`s that occurred during block
            initialization with the `method` and `data` for each.
      description: >-
        Block finalization does not correspond to consensus, i.e. whether the
        block is in the canonical chain. It denotes the finalization of block
        _construction._
    UnappliedSlash:
      type: object
      properties:
        validator:
          type: string
          format: ss58
          description: Stash account ID of the offending validator.
        own:
          type: string
          format: unsignedInteger
          description: The amount the validator will be slashed.
        others:
          type: array
          items:
            type: string
            format: 'tuple(ss58, unsignedInteger)'
          description: >-
            Array of tuples of (accountId, amount) representing all the stashes
            of other slashed stakers and the amount they will be slashed.
        reporters:
          type: array
          items:
            type: string
            format: ss58
          description: Array of account IDs of the reporters of the offense.
        payout:
          type: string
          format: unsignedInteger
          description: Amount of bounty payout to reporters.
    ElectionStatus:
      type: object
      properties:
        status:
          type: object
          description: >-
            Era election status; either `Close; null` or `Open; <BlockNumber>`.
            A status of `Close` indicates that the submission window for
            solutions from off-chain Phragmen is not open. A status of `Open`
            indicates the submission window for off-chain Phragmen solutions.
          enum:
            - Close:
              type: null
            - Open:
              type: string
              format: unsignedInteger
        toggleEstimate:
          type: string
          format: unsignedInteger
          description: >-
            Upper bound estimate of the block height at which the `status` will
            switch.
    StakingProgress:
      type: object
      properties:
        at:
          $ref: '#/components/schemas/BlockIdentifiers'
        activeEra:
          type: string
          format: unsignedInteger
        forceEra:
          type: string
          description: Current status of era forcing.
          enum:
            - ForceNone
            - NotForcing
            - ForceAlways
            - ForceNew
        nextActiveEraEstimate:
          type: string
          format: unsignedInteger
          description: >-
            Upper bound estimate of the block height at which the next active
            era will start. Not included in response when
            `forceEra.isForceNone`.
        nextSessionEstimate:
          type: string
          format: unsignedInteger
          description: >-
            Upper bound estimate of the block height at which the next session
            will start.
        unappliedSlashes:
          type: array
          items:
            $ref: '#/components/schemas/UnappliedSlash'
        electionStatus:
          $ref: '#/components/schemas/ElectionStatus'
        idealValidatorCount:
          type: string
          format: unsignedInteger
          description: >-
            Upper bound of validator set size; considered the ideal size. Not
            included in response when `forceEra.isForceNone`.
        validatorSet:
          type: array
          items:
            type: string
            format: ss58
          description: >-
            Stash account IDs of the validators for the current session. Not
            included in response when `forceEra.isForceNone`.
    Tx:
      type: object
      properties:
        transaction:
          type: string
          format: hex
    TxMaterial:
      type: object
      properties:
        at:
          $ref: '#/components/schemas/BlockIdentifiers'
        genesisHash:
          type: string
          format: blockHash
          description: The hash of the chain's genesis block.
        chainName:
          type: string
          description: The chain's name.
        specName:
          type: string
          description: The chain's spec.
        specVersion:
          type: string
          description: The spec version. Always increased in a runtime upgrade.
        txVersion:
          type: string
          description: >-
            The transaction version. Common `txVersion` numbers indicate that
            the transaction encoding format and method indices are the same.
            Needed for decoding in an offline environment. Adding new
            transactions does not change `txVersion`.
        metadata:
          type: string
          format: hexScaleEncoded
          description: The chain's metadata in hex format.
    TxSuccess:
      type: object
      properties:
        txHash:
          type: string
          description: The hash of the encoded transaction.
    TxFailure:
      type: object
      properties:
        error:
          type: string
          description: >-
            Failed to parse a tx or Failed to submit tx. In the case of the
            former, the Sidecar was unable to parse the transaction and never
            even submitted it to the client. In the case of the latter, the
            transaction queue rejected the transaction. For a dryrun the client
            error would likely be Unable to dry run extrinsic.
        data:
          type: string
          description: >-
            The hex-encoded extrinsic. Only present if Sidecar fails to parse a
            transaction.
        cause:
          type: string
          description: The error message from parsing or from the client.
    TxFeeEstimate:
      type: object
      properties:
        weight:
          type: string
          description: Extrinsic weight.
        class:
          type: string
          description: Extrinsic class.
          enum:
            - Normal
            - Operational
            - Mandatory
        partialFee:
          type: string
          format: unsignedInteger
          description: >-
            Expected inclusion fee for the transaction. Note that the fee rate
            changes. up to 30% in a 24 hour period and this will not be the
            exact fee.